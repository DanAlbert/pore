version: 2
jobs:
  build:
    docker:
      - image: jmgao/ubuntu-cosmic-mingw-w64-rust:latest
    steps:
      - checkout
      - run:
          name: Pull submodules
          command: git submodule update --init
      - run:
          name: Switch to nightly
          command: rustup default nightly-2019-04-07
      - run:
          name: Install OpenSSL
          command: apt-get install libssl-dev
      - run:
          name: Build
          command: cargo build
      - run:
          name: Check
          command: cargo check
